<!--
  The Side Bar
-->

<div id="sidebar" class="d-flex flex-column align-items-end" lang="{{lang}}">
  <div class="profile-wrapper text-center">
    <div id="avatar">
      <a href="{{ '/' | relative_url }}" alt="avatar" class="mx-auto">
        {% if site.avatar != '' and site.avatar %}
          {% capture avatar_url %}
            {%- if site.avatar contains '://' -%}
              {{ site.avatar }}
            {%- elsif site.img_cdn != '' and site.img_cdn -%}
              {{ site.avatar | prepend: site.img_cdn }}
            {%- else -%}
              {{ site.avatar | relative_url }}
            {%- endif -%}
          {% endcapture %}
          <img src="{{ avatar_url }}" alt="avatar" onerror="this.style.display='none'">
        {% endif %}
      </a>
    </div>

    <div class="site-title mt-3">
      <a href="{{ '/' | relative_url }}">{{ site.title }}</a>
    </div>
    <div class="site-subtitle font-italic">{{ site.tagline }}</div>

  </div><!-- .profile-wrapper -->

  <ul class="w-100">

    <!-- home -->
    <li class="nav-item{% if page.layout == 'home' %}{{ " active" }}{% endif %}">
      <a href="{{ '/' | relative_url }}" class="nav-link">
        <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i>
        <span>{{ site.data.locales[lang].tabs.home | upcase }}</span>
      </a>
    </li>
    <!-- the real tabs -->
    {% for tab in site.tabs %}
    <li class="nav-item{% if tab.url == page.url %}{{ " active" }}{% endif %}">
      <a href="{{ tab.url | relative_url }}" class="nav-link">
        <i class="fa-fw {{ tab.icon }} ml-xl-3 mr-xl-3 unloaded"></i>
        {% capture tab_name %}{{ tab.url | split: '/' }}{% endcapture %}

        <span>{{ site.data.locales[lang].tabs.[tab_name] | default: tab.title | upcase }}</span>
      </a>
    </li> <!-- .nav-item -->
    {% endfor %}

    <!-- Categories with collapsible subcategories -->
    <li class="nav-item">
      <a href="#categoriesSubmenu" data-toggle="collapse" aria-expanded="false" class="nav-link dropdown-toggle">
        <i class="fa-fw fas fa-folder ml-xl-3 mr-xl-3 unloaded"></i>
        <span>CATEGORIES</span>
      </a>
      <ul class="collapse list-unstyled" id="categoriesSubmenu" style="padding-left: 20px;">
        <!-- Daily -->
        <li class="nav-item">
          <a href="{{ '/categories/daily/' | relative_url }}" class="nav-link" style="font-size: 0.9rem;">
            <i class="fa-fw fas fa-calendar-day"></i>
            <span>Daily</span>
          </a>
        </li>

        <!-- Mentoring with subcategories -->
        <li class="nav-item">
          <a href="#mentoringSubmenu" data-toggle="collapse" aria-expanded="false" class="nav-link dropdown-toggle" style="font-size: 0.9rem;">
            <i class="fa-fw fas fa-graduation-cap"></i>
            <span>Mentoring</span>
          </a>
          <ul class="collapse list-unstyled" id="mentoringSubmenu" style="padding-left: 20px;">
            <li>
              <a href="{{ '/categories/mentoring-books/' | relative_url }}" class="nav-link" style="font-size: 0.85rem;">
                <i class="fa-fw fas fa-book"></i>
                <span>Books</span>
              </a>
            </li>
            <li>
              <a href="{{ '/categories/mentoring-translations/' | relative_url }}" class="nav-link" style="font-size: 0.85rem;">
                <i class="fa-fw fas fa-language"></i>
                <span>Translations</span>
              </a>
            </li>
            <li>
              <a href="{{ '/categories/mentoring-learning/' | relative_url }}" class="nav-link" style="font-size: 0.85rem;">
                <i class="fa-fw fas fa-lightbulb"></i>
                <span>Learning</span>
              </a>
            </li>
          </ul>
        </li>

        <!-- Tech with subcategories -->
        <li class="nav-item">
          <a href="#techSubmenu" data-toggle="collapse" aria-expanded="false" class="nav-link dropdown-toggle" style="font-size: 0.9rem;">
            <i class="fa-fw fas fa-code"></i>
            <span>Tech</span>
          </a>
          <ul class="collapse list-unstyled" id="techSubmenu" style="padding-left: 20px;">
            <li>
              <a href="{{ '/categories/tech-kubernetes/' | relative_url }}" class="nav-link" style="font-size: 0.85rem;">
                <i class="fa-fw fas fa-dharmachakra"></i>
                <span>Kubernetes</span>
              </a>
            </li>
            <li>
              <a href="{{ '/categories/tech-database/' | relative_url }}" class="nav-link" style="font-size: 0.85rem;">
                <i class="fa-fw fas fa-database"></i>
                <span>Database</span>
              </a>
            </li>
            <li>
              <a href="{{ '/categories/tech-coding/' | relative_url }}" class="nav-link" style="font-size: 0.85rem;">
                <i class="fa-fw fas fa-file-code"></i>
                <span>Coding</span>
              </a>
            </li>
            <li>
              <a href="{{ '/categories/tech-infrastructure/' | relative_url }}" class="nav-link" style="font-size: 0.85rem;">
                <i class="fa-fw fas fa-server"></i>
                <span>Infrastructure</span>
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </li>

  </ul> <!-- ul.nav.flex-column -->

  <div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center">

    {% for entry in site.data.contact %}
      {% capture url %}
        {%- if entry.type == 'github' -%}
          https://github.com/{{ site.github.username }}
        {%- elsif entry.type == 'twitter' -%}
          https://twitter.com/{{ site.twitter.username }}
        {%- elsif entry.type == 'email' -%}
          {% assign email = site.social.email | split: '@' %}
          javascript:location.href = 'mailto:' + ['{{ email[0] }}','{{ email[1] }}'].join('@')
        {%- elsif entry.type == 'rss' -%}
          {{ "/feed.xml" | relative_url }}
        {%- else -%}
          {{ entry.url }}
        {%- endif -%}
      {% endcapture %}

      {% if url %}
      <a href="{{ url }}" aria-label="{{ entry.type }}"
        {% unless site.theme_mode %}class="order-{{ forloop.index | plus: 2 }}"{% endunless %}
        {% unless entry.noblank %}target="_blank" rel="noopener"{% endunless %}>
        <i class="{{ entry.icon }}"></i>
      </a>
      {% endif %}

    {% endfor %}

    {% unless site.theme_mode %}
      {% if site.data.contact.size > 0 %}
        <span class="icon-border order-2"></span>
      {% endif %}

      <span id="mode-toggle-wrapper" class="order-1">
        {% include mode-toggle.html %}
      </span>
    {% endunless %}

  </div> <!-- .sidebar-bottom -->

</div><!-- #sidebar -->
