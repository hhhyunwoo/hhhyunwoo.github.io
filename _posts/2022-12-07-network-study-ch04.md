---
layout: post
title: "[CISCO 네트워킹] 4. 네트워크 장비에 관한 이야기"
date: 2022-12-07
categories:
  - mentoring/books
tags:
  [
    blog,
    jekyll,
    jekyll theme,
    NexT theme,
    Computer Science,
    컴퓨터공학,
    개발,
    소프트웨어,
    지킬 테마,
    지킬 블로그 포스팅,
    GitHub Pages,
  ]
---
# 4. 네트워크 장비에 관한 이야기
# 랜카드

![image](https://user-images.githubusercontent.com/37402136/207042834-b7f99c06-b435-468b-bc6b-8572057d34d2.png)

- 유저의 데이터를 케이블에 실어서 허브나 스위치, 혹은 라우터 등으로 전달해주고 자신에게 온 데이터를 CPU에게 전달해주는 역할
- 즉, 랜에 접속하기 위한 카드처럼 생긴 것!
- 선택 시 생각해야하는 것
    - 종류 (네트워킹 방식에 따라 나뉨)
        - 이더넷용 랜카드
        - 토큰링용 랜카드
        - FDDI
        - ATM용
    - PC의 버스 방식 (컴퓨터에서 데이터가 날아다니는 길의 방식을 의미함)
        - PCI
        - ISA
        - EISA
- 몇년전까지만 해도 10Mbps 용 랜카드가 일반적이었음. 즉 1초에 1MB
    - 하지만 OSI 7 Layer를 봐서 알겠지만 여러 헤더가 붙고 오버헤드가 발생함
- IRQ (Interrupt Request)
    - 목적지가 자신의 랜카드 맥어드레스와 일치하는 데이터가 들어왔을 때 랜카드는 컴퓨터의 CPU에 인터럽트를 걸고 요청을 함

# Hub

- Multiport Repeater
    - 허브는 포트가 여러 개 달린 장비인데, 한 포트로 들어온 데이터를 나머지 모든 포트로 뿌려줌!
    - 리피터는 데이터 전송 시 전달을 해주는 역할을 함
        - UTP 케이블 최대 전송 거리를 넘기기 위해 ~ 등
- 랜카드가 설치된 각각의 PC들은 케이블을 타고 바로 이 허브에 연결됨. 허브에 연결된 PC끼리는 서로 통신이 가능함.
- 허브끼리 연결을 하게 되면 마치 1대의 허브처럼 동작이 가능함.
- 종류
    - 이더넷용
    - 토큰링용
    - 일반 허브
    - 패스트 허브
- 허브의 동작 방법
    - 1번 PC가 데이터 전송 → 1번 포트를 제외하고 나머지 모든 포트로 데이터 전송 → 각 PC의 랜카드가 자신에게 온 것인지 확인하고 자기 맥어드레스가 아니면 버림
- 이더넷 허브는 CSMA/CD 의 적용을 받음. → 콜리전 도메인에 있다는 의미. 즉, 하나의 PC가 허브에 데이터를 보내고 있을 때 또 다른 PC가 데이터를 보내려고 하면 콜리전 발생
- 허브를 계속 연결해 나갈 수록 콜리전 도메인의 크기는 점 점 커짐

## 허브의 한계

- Shared Hub
    - 허브에 연결된 모든 PC들은 하나의 콜리전 도메인에 있기 때문에, 어느 한 순간에는 한 PC만 데이터를 보낼 수 있음

## 허브의 종류

- 인텔리전트 허브
    - Network Management System 에서 모든 데이터를 분석하고 제어도 할 수 있음
    - CSMA/CD 특징 떄문에 문제가 생긴 PC가 계속 이상한 데이터를 보내고 있다면 그것을 탐지해서 isolation 시킬 수 있음. → Auto Partition 기능
- 더미 허브
- 세미인텔리전트 허브
    - 더미 허브인데 인텔리전트 허브와 연결하면 인텔리전트가 됨

## 브리지와 스위치

- 아무리 빠른 속도의 허브를 쓰더라도 어느  한 순간에는 하나의 PC만 데이터를 보낼 수 있음.
- 이러한 문제를 해결하기 위해 콜리전 도메인을 나누어줄 수 있는 장비가 브리지와 스위치이다.
- 스위치가 나오기 전까지는 브리지가 해당 역할을 했지만 이제는 브리지보다 스위치가 더 빠르고 더 트렌드임

### 허브 vs 스위치

- 허브가 더 쌈
- 허브가 스위치보다 더 빠름
    - 들어온 데이터에게 해주는 일이 따로 없기 때문에
- → 어떠한 데이터가 돌아다니느냐 하는 것을 알고 판단해야함

### 브리지의 역할

- 허브로 만들어진 콜리전 도메인 사이를 반으로 나누고 중간에 다리를 놓는 것
    - 중간에 서서 브리지 테이블을 보면서 통신이 다리 한쪽에서만 일어나면 다리를 못건너가게 하고, 통신이 다리를 통과해야 가능하면 그때만 다리를 건너게 해준다!

### 브리지/스위치의 기능

- Learning
    - 들어온 데이터가 브리지 테이블(맥 어드레스 테이블)에 없으면 기록한다
- Flooding
    - 들어온 포트를 제외한 나머지 모든 포트로 뿌린다.
    - 들어온 프레임이 찾아가는 주소가 만약 브리지가 가지고 있는 브리지 테이블에 없는 주소라면 flooding 을 함
    - 브로트캐스트나 멀티캐스트의 경우에도 발생함
- Forwarding
    - 해당 포트로 건네준다.
    - 목적지의 맥 어드레스를 자신의 브리지 테이블에 가지고 있고, 이 목적지가 출발지의 맥 어드레스와 다른 세그먼트에 존재하는 경우에 일어남 .
- Filtering
    - 브리지를 못 넘어가게 막음
    - 출발지와 목적지가 같으 ㄴ세그먼트에 있는 경우
    - 이러한 기능 때문에 허브와는 다르게 콜리전 도메인을 나누어 줄 수 있는 것
- Aging
    - Time To Live
    - 계속 저장할 수 없으니, 일정 시간이 지나면 해당 정보 삭제
    - 다시 들어오면 refresh 진행

### 브리지 vs 스위치

- 이름이 다름
- 스위치가 더 비쌈
- 스위치가 더 잘나감

## Looping

- 프레임이 네트워크 상에서 무한정으로 뱅뱅 돌기 때문에 이더넷의 특성상 네트워크가 조용해야 데이터 전송을 할 수가 있는데, 다른 녀석들이 계속 네트워크가 조용해지기를 기다리기만 할 뿐 데이터 전송을 불가능해지는 상태를 의미함
- 루핑이 발생하면 통신도 안되고 문제도 찾기 어려움
- 스위치 끼리 다리가 두개가 놓여있으면 장비 간 통신의 길이 두가지가 되기 때문에 루핑이 발생함

### 스패닝 트리 알고리즘

- 브리지나 스위치에 목적자까지의 경로가 두 개 이상 존재하면 반드시 루핑이 발생하고, 이를 막는 것이 스패닝 트리 알고리즘임
- 스패닝 트리는 자동으로 루핑을 검색해서 이런 루핑이 발생할 수 있는 상황을 미리 막아줌.
- 또한 하나를 제외하고 나머지 경로를 자동으로 막아두었다가 기존 경로에 문제가 생기면 막아놓은 경로를 풀어서 데이터를 전송함 (Fault Toleration)

## 라우팅 vs 스위칭

- 비교
    - 라우터가 스위치보다 비쌈
    - 스위치가 더 빠름
    - 스위치가 구성이 더 쉬움
- 하지만 브로트 케스트 도메인 분리를 위해서 라우터 없이는 문제를 해결할 수가 없다.
- 전 세계에서 하나의 브로트 케스트 도메인을 사용한다면?
    - 하루에도 수 많은 PC들이 ARP 를 사용하는데, 이때마다 계속 브로드케스팅이 발생함
    - CPU 성능도 낮춤
- 따라서 브로드케스트 도메인을 나누는 것은 매우 중요함
- 스위치 만으로는 브로드 케스트 도메인을 나눌 수가 없음. 라우터가 필요!
- → 스위치냐 라우터냐의 답은! 적당히 사용해야함